{"version":3,"file":"records-modal.harness-DSqixB8y.js","sources":["../../../tests/e2e/records-modal.harness.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { RecordModal } from \"../../src/pages/RecordsPage\";\n\ntype Notice = {\n  id: string;\n  message: string;\n};\n\nfunction NoticeView({ notices }: { notices: Notice[] }) {\n  return (\n    <div>\n      {notices.map((notice) => (\n        <div key={notice.id}>{notice.message}</div>\n      ))}\n    </div>\n  );\n}\n\nexport function ModalHarness({ mode }: { mode: \"success\" | \"error\" }) {\n  const [open, setOpen] = useState(true);\n  const [notices, setNotices] = useState<Notice[]>([]);\n\n  const pushNotice = (message: string) => {\n    const id = `${Date.now()}-${Math.random().toString(16).slice(2)}`;\n    setNotices([{ id, message }]);\n  };\n\n  const notifySuccess = (message: string) => {\n    pushNotice(message);\n  };\n\n  const notifyError = (error: unknown) => {\n    if (error instanceof Error) {\n      pushNotice(error.message);\n      return;\n    }\n    pushNotice(String(error));\n  };\n\n  return (\n    <div>\n      <NoticeView notices={notices} />\n      {open ? (\n        <RecordModal\n          title=\"新增记录\"\n          initial={null}\n          onClose={() => setOpen(false)}\n          onSubmit={async () => {\n            if (mode === \"success\") {\n              notifySuccess(\"记录新增成功\");\n              return;\n            }\n            const error = new Error(\"创建失败\");\n            notifyError(error);\n            throw error;\n          }}\n        />\n      ) : (\n        <div>已关闭</div>\n      )}\n    </div>\n  );\n}\n"],"names":["jsx","useState"],"mappings":";;;AAQA,SAAS,UAAA,CAAW,EAAE,OAAA,EAAQ,EAA0B;AACtD,EAAA,uBACEA,qBAAA,CAAC,KAAA,EAAA,EACE,QAAA,EAAA,OAAA,CAAQ,GAAA,CAAI,CAAC,MAAA,qBACZA,qBAAA,CAAC,KAAA,EAAA,EAAqB,QAAA,EAAA,MAAA,CAAO,OAAA,EAAA,EAAnB,MAAA,CAAO,EAAoB,CACtC,CAAA,EACH,CAAA;AAEJ;AAEO,SAAS,YAAA,CAAa,EAAE,IAAA,EAAK,EAAkC;AACpE,EAAA,MAAM,CAAC,IAAA,EAAM,OAAO,CAAA,GAAIC,sBAAS,IAAI,CAAA;AACrC,EAAA,MAAM,CAAC,OAAA,EAAS,UAAU,CAAA,GAAIA,qBAAA,CAAmB,EAAE,CAAA;AAEnD,EAAA,MAAM,UAAA,GAAa,CAAC,OAAA,KAAoB;AACtC,IAAA,MAAM,EAAA,GAAK,CAAA,EAAG,IAAA,CAAK,GAAA,EAAK,CAAA,CAAA,EAAI,IAAA,CAAK,MAAA,EAAO,CAAE,QAAA,CAAS,EAAE,CAAA,CAAE,KAAA,CAAM,CAAC,CAAC,CAAA,CAAA;AAC/D,IAAA,UAAA,CAAW,CAAC,EAAE,EAAA,EAAI,OAAA,EAAS,CAAC,CAAA;AAAA,EAC9B,CAAA;AAEA,EAAA,MAAM,aAAA,GAAgB,CAAC,OAAA,KAAoB;AACzC,IAAA,UAAA,CAAW,OAAO,CAAA;AAAA,EACpB,CAAA;AAEA,EAAA,MAAM,WAAA,GAAc,CAAC,KAAA,KAAmB;AACtC,IAAA,IAAI,iBAAiB,KAAA,EAAO;AAC1B,MAAA,UAAA,CAAW,MAAM,OAAO,CAAA;AACxB,MAAA;AAAA,IACF;AACA,IAAA,UAAA,CAAW,MAAA,CAAO,KAAK,CAAC,CAAA;AAAA,EAC1B,CAAA;AAEA,EAAA,8CACG,KAAA,EAAA,EACC,QAAA,EAAA;AAAA,oBAAAD,qBAAA,CAAC,cAAW,OAAA,EAAkB,CAAA;AAAA,IAC7B,IAAA,mBACCA,qBAAA;AAAA,MAAC,WAAA;AAAA,MAAA;AAAA,QACC,KAAA,EAAM,MAAA;AAAA,QACN,OAAA,EAAS,IAAA;AAAA,QACT,OAAA,EAAS,MAAM,OAAA,CAAQ,KAAK,CAAA;AAAA,QAC5B,UAAU,YAAY;AACpB,UAAA,IAAI,SAAS,SAAA,EAAW;AACtB,YAAA,aAAA,CAAc,QAAQ,CAAA;AACtB,YAAA;AAAA,UACF;AACA,UAAA,MAAM,KAAA,GAAQ,IAAI,KAAA,CAAM,MAAM,CAAA;AAC9B,UAAA,WAAA,CAAY,KAAK,CAAA;AACjB,UAAA,MAAM,KAAA;AAAA,QACR;AAAA;AAAA,KACF,mBAEAA,qBAAA,CAAC,KAAA,EAAA,EAAI,QAAA,EAAA,KAAA,EAAG;AAAA,GAAA,EAEZ,CAAA;AAEJ;;;;"}